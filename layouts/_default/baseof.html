
<!DOCTYPE html><html lang="en"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>{{ block "title" . }}{{ .Title }} | {{ .Site.Title }}{{ end }}</title>
<link rel="icon" href="/images/icon.png">
<style>
  /* === CSS Custom Properties === */
  :root {
    /* Colors - Primary & Accent */
    --color-primary: #2563eb;
    --color-primary-hover: #1d4ed8;
    --color-secondary: #7c3aed;
    --color-accent: #f97316;
    --color-accent-hover: #ea580c;
    --color-success: #10b981;

    /* Colors - Neutrals */
    --color-header-bg: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
    --color-bg: #ffffff;
    --color-text: #1f2937;
    --color-text-secondary: #6b7280;
    --color-border: #e5e7eb;
    --color-code-bg: #f3f4f6;
    --color-hover-bg: #f9fafb;

    /* Typography */
    --font-base: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    --font-mono: "Menlo", "Monaco", "Courier New", monospace;
    --font-size-base: 0.95rem;
    --font-size-small: 0.85rem;
    --line-height-base: 1.6;
    --line-height-heading: 1.3;

    /* Spacing */
    --space-xs: 0.5rem;
    --space-sm: 0.75rem;
    --space-md: 1rem;
    --space-lg: 1.5rem;
    --space-xl: 1.75rem;
    --space-2xl: 2.5rem;

    /* Layout */
    --max-width: 960px;
    --border-radius: 8px;
    --border-radius-sm: 6px;

    /* Shadows */
    --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.1);
    --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.1);
    --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.12);
    --shadow-glow: 0 0 20px rgba(249, 115, 22, 0.3);

    /* Transitions */
    --transition-fast: 150ms ease;
    --transition-base: 200ms ease;
    --transition-slow: 300ms ease;
  }

  /* === Base Styles === */
  *, *::before, *::after {
    box-sizing: border-box;
  }

  html {
    font-size: 16px;
    scroll-behavior: smooth;
  }

  html, body {
    margin: 0;
    padding: 0;
    font-family: var(--font-base);
    color: var(--color-text);
    background: var(--color-bg);
    line-height: var(--line-height-base);
    font-size: var(--font-size-base);
  }

  /* Typography */
  h1, h2, h3, h4, h5, h6 {
    line-height: var(--line-height-heading);
    color: var(--color-text);
    font-weight: 600;
    letter-spacing: -0.02em;
    margin-top: var(--space-xl);
    margin-bottom: var(--space-md);
  }

  h1 {
    font-size: clamp(1.5rem, 3.5vw, 1.9rem);
    margin-top: var(--space-2xl);
  }

  h2 {
    font-size: clamp(1.25rem, 2.5vw, 1.5rem);
  }

  h3 {
    font-size: clamp(1.1rem, 2vw, 1.25rem);
  }

  h4, h5, h6 {
    font-size: 1rem;
  }

  p {
    margin-top: 0;
    margin-bottom: var(--space-md);
  }

  /* Links */
  a {
    color: var(--color-primary);
    text-decoration: none;
    transition: all var(--transition-fast);
    position: relative;
  }

  a:hover {
    color: var(--color-accent);
    text-decoration: none;
  }

  main a:not(.cite-pop):hover {
    text-decoration: underline;
    text-decoration-color: var(--color-accent);
    text-decoration-thickness: 2px;
    text-underline-offset: 3px;
  }

  a:focus {
    outline: 2px solid var(--color-accent);
    outline-offset: 2px;
    border-radius: 2px;
  }

  /* Images */
  img {
    max-width: 100%;
    height: auto;
    border-radius: var(--border-radius-sm);
    display: block;
  }

  /* Code */
  code {
    font-family: var(--font-mono);
    font-size: 0.9em;
    background: var(--color-code-bg);
    padding: 0.125rem 0.375rem;
    border-radius: 4px;
  }

  pre {
    background: var(--color-code-bg);
    border-radius: var(--border-radius-sm);
    padding: var(--space-md);
    overflow-x: auto;
    line-height: 1.5;
  }

  pre code {
    background: transparent;
    padding: 0;
    white-space: pre-wrap;
  }

  /* === Layout Components === */
  .wrap {
    max-width: var(--max-width);
    margin: 0 auto;
    padding: clamp(1rem, 3vw, 1.5rem);
  }

  main.wrap {
    padding: clamp(1rem, 3vw, 1.5rem);
  }

  /* Header */
  header {
    background: var(--color-header-bg);
    color: #fff;
    padding: 1.25rem var(--space-lg);
    box-shadow: var(--shadow-md);
    position: sticky;
    top: 0;
    z-index: 100;
    border-bottom: 2px solid rgba(249, 115, 22, 0.3);
  }

  header .wrap {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--space-md);
    padding: 0;
    min-height: 32px;
  }

  header strong {
    font-size: 1.05rem;
    font-weight: 600;
    letter-spacing: -0.01em;
    color: #fff;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
    line-height: 1.4;
    display: flex;
    align-items: center;
  }

  header a {
    color: rgba(255, 255, 255, 0.9);
    text-decoration: none;
    padding: var(--space-xs) var(--space-sm);
    border-radius: var(--border-radius-sm);
    transition: all var(--transition-fast);
    font-size: 0.95rem;
  }

  header a:hover {
    color: var(--color-accent);
    background: rgba(249, 115, 22, 0.1);
    text-decoration: none;
    transform: translateY(-1px);
  }

  /* Navigation */
  nav ul {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    gap: var(--space-xs);
    align-items: center;
  }

  nav li {
    margin: 0;
    list-style: none;
  }

  /* Mobile Navigation Toggle */
  .nav-toggle {
    display: none;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    gap: 4px;
    width: 44px;
    height: 44px;
    border: 1px solid rgba(249, 115, 22, 0.3);
    border-radius: var(--border-radius-sm);
    background: rgba(249, 115, 22, 0.05);
    color: #fff;
    cursor: pointer;
    transition: all var(--transition-fast);
    padding: 0;
  }

  .nav-toggle:hover {
    background: rgba(249, 115, 22, 0.15);
    border-color: var(--color-accent);
    transform: scale(1.05);
  }

  .nav-toggle span {
    display: block;
    width: 20px;
    height: 2px;
    background: var(--color-accent);
    transition: all var(--transition-fast);
  }

  /* Footer */
  footer {
    border-top: 1px solid var(--color-border);
    color: var(--color-text-secondary);
    padding: var(--space-lg) var(--space-lg);
    font-size: var(--font-size-small);
    margin-top: var(--space-2xl);
  }

  /* === Utility Classes === */
  .subtitle {
    color: var(--color-text-secondary);
    font-size: 1rem;
    margin-top: calc(-1 * var(--space-md));
    margin-bottom: var(--space-xl);
    font-style: italic;
  }

  .postlist {
    list-style: none;
    padding: 0;
  }

  .postlist li {
    margin: var(--space-md) 0;
    padding: var(--space-md);
    border-radius: var(--border-radius-sm);
    transition: all var(--transition-fast);
    border-left: 3px solid transparent;
  }

  .postlist li:hover {
    background: var(--color-hover-bg);
    border-left-color: var(--color-accent);
    transform: translateX(4px);
    box-shadow: var(--shadow-sm);
  }

  /* Full-bleed hero with overlay */
  .hero {
    position: relative;
    left: 50%;
    right: 50%;
    margin-left: -50vw;
    margin-right: -50vw;
    width: 100vw;
    margin-top: -23px;
    margin-bottom: 0;
    padding-top: 0;
    line-height: 0;
    max-height: 400px;
    overflow: hidden;
  }

  .hero img {
    display: block;
    width: 100%;
    height: 400px;
    object-fit: cover;
    border-radius: 0;
    opacity: 0.75;
    filter: brightness(0.85);
  }

  /* Hero overlay for home page - all content after hero */
  main.wrap > .hero:first-child ~ * {
    position: relative;
    z-index: 2;
    background: rgba(255, 255, 255, 0.92);
    backdrop-filter: blur(10px);
    padding: var(--space-xl);
    border-radius: var(--border-radius);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
    max-width: 750px;
    margin-left: auto;
    margin-right: auto;
    border: 1px solid rgba(255, 255, 255, 0.3);
  }

  main.wrap > .hero:first-child + h1 {
    margin-top: calc(-350px);
    margin-bottom: var(--space-lg);
  }

  main.wrap > .hero:first-child ~ h1 + * {
    margin-top: var(--space-lg);
  }

  main.wrap > .hero:first-child ~ h1 ~ * {
    margin-top: var(--space-lg);
  }

  /* Ensure proper bottom spacing after all hero content */
  main.wrap:has(.hero) {
    padding-bottom: var(--space-2xl) !important;
  }

  /* === Citation Popover === */
  .cite-pop {
    border: 0;
    background: transparent;
    text-decoration: underline;
    text-decoration-color: var(--color-primary);
    text-decoration-thickness: 1px;
    text-underline-offset: 2px;
    cursor: pointer;
    padding: 0;
    color: var(--color-primary);
    font-size: inherit;
    font-family: inherit;
    transition: all var(--transition-fast);
  }

  .cite-pop:hover {
    color: var(--color-accent);
    text-decoration-color: var(--color-accent);
    text-decoration-thickness: 2px;
  }

  .cite-pop:focus {
    outline: 2px solid var(--color-accent);
    outline-offset: 2px;
    border-radius: 2px;
  }

  .cite-popover {
    font-size: inherit;
    position: absolute;
    max-width: 540px;
    background: var(--color-bg);
    border: 1px solid var(--color-border);
    box-shadow: var(--shadow-lg);
    border-radius: var(--border-radius);
    padding: var(--space-md) var(--space-lg) var(--space-md) var(--space-md);
    z-index: 1000;
    animation: fadeIn var(--transition-base);
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(-4px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .cite-popover p {
    margin: 0;
    line-height: 1.5;
  }

  .cite-popover a {
    word-break: break-all;
  }

  .cite-popover .cite-body {
    padding-right: var(--space-xl);
  }

  .cite-popover .cite-close {
    position: absolute;
    top: var(--space-sm);
    right: var(--space-sm);
    border: 0;
    background: transparent;
    font-size: 1.25rem;
    line-height: 1;
    cursor: pointer;
    color: var(--color-text-secondary);
    width: 28px;
    height: 28px;
    border-radius: var(--border-radius-sm);
    transition: all var(--transition-fast);
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .cite-popover .cite-close:hover {
    background: var(--color-hover-bg);
    color: var(--color-text);
  }

  .cite-popover .cite-copy {
    background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-hover) 100%);
    border: none;
    border-radius: var(--border-radius-sm);
    padding: var(--space-xs) var(--space-md);
    cursor: pointer;
    font-size: var(--font-size-small);
    font-family: var(--font-base);
    color: #fff;
    font-weight: 500;
    transition: all var(--transition-fast);
  }

  .cite-popover .cite-copy:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(249, 115, 22, 0.4);
  }

  /* === Tables === */
  table {
    width: 100%;
    border-collapse: collapse;
    margin: var(--space-lg) 0;
    font-size: 0.9rem;
  }

  th, td {
    padding: var(--space-sm) var(--space-md);
    text-align: left;
    border-bottom: 1px solid var(--color-border);
  }

  th {
    background: var(--color-code-bg);
    font-weight: 600;
    color: var(--color-text);
    font-size: 0.85rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  tr:hover {
    background: var(--color-hover-bg);
  }

  tbody tr {
    transition: background var(--transition-fast);
  }

  /* === Responsive Design === */
  @media (max-width: 768px) {
    :root {
      --space-xl: 1.5rem;
      --space-2xl: 2rem;
    }

    .wrap {
      padding: var(--space-md);
    }

    header {
      padding: var(--space-md);
    }

    header nav ul {
      display: block;
      overflow: hidden;
      max-height: 0;
      transition: max-height 0.3s ease;
      flex-direction: column;
      align-items: flex-start;
      gap: var(--space-xs);
      margin-top: var(--space-md);
    }

    header.nav-open nav ul {
      max-height: 500px;
    }

    header nav li a {
      display: block;
      padding: var(--space-sm) var(--space-md);
    }

    .nav-toggle {
      display: inline-flex;
    }

    .cite-popover {
      left: 16px !important;
      right: 16px;
      max-width: calc(100vw - 32px);
    }

    h1 {
      margin-top: var(--space-xl);
    }

    /* Hero adjustments on mobile */
    .hero {
      max-height: 300px;
    }

    .hero img {
      height: 300px;
    }

    main.wrap > .hero:first-child + h1 {
      margin-top: calc(-260px);
      font-size: 1.35rem;
    }

    main.wrap > .hero:first-child ~ * {
      padding: var(--space-md);
      max-width: 90%;
    }
  }

  @media (max-width: 480px) {
    header strong {
      font-size: 0.95rem;
    }

    .nav-toggle span {
      width: 18px;
    }

    table {
      font-size: 0.8rem;
    }

    th, td {
      padding: var(--space-xs) var(--space-sm);
    }
  }

  /* === Remove white strip between header and hero === */
  header, header .wrap, header nav, header nav ul {
    margin-bottom: 0 !important;
  }

  main.wrap {
    padding-top: 0 !important;
  }

  main.wrap > .hero:first-child {
    margin-top: 0 !important;
  }

  main.wrap > *:first-child:not(.hero) {
    margin-top: 0 !important;
    padding-top: var(--space-lg);
  }

  /* Add back padding for non-hero pages */
  main.wrap:not(:has(.hero)) {
    padding: clamp(1rem, 3vw, 1.5rem) !important;
  }
</style></head><body>
<header><div class="wrap">
  <strong>{{ .Site.Title }}</strong>
  
<button class="nav-toggle" aria-controls="site-nav" aria-label="Open menu" aria-expanded="false"><span></span><span></span><span></span></button>
<nav id="site-nav" style="float:right;"><ul>
    {{ range .Site.Menus.main }}<li><a href="{{ .URL }}">{{ .Name }}</a></li>{{ end }}
  </ul></nav><div style="clear:both;"></div>
</div></header>
<main class="wrap">{{ block "main" . }}{{ end }}</main>
<footer><div class="wrap">© {{ now.Format "2006" }} {{ with .Site.Params.author.name }}{{ . }}{{ else }}{{ .Site.Title }}{{ end }}</div></footer>


<script>
// citeref popover (click or hover) with Copy button
(function(){
  let pop=null, hoverTimer=null;
  function close(){ if(pop){ pop.remove(); pop=null; } }
  function copyPlain(text){
    try {
      navigator.clipboard.writeText(text);
    } catch(e){
      // fallback: create a temp element
      const t=document.createElement('textarea');
      t.value=text; document.body.appendChild(t);
      t.select(); document.execCommand('copy'); t.remove();
    }
  }
  function open(el, html, plain){
    close();
    pop=document.createElement('div');
    pop.className='cite-popover';
    pop.innerHTML='<button class="cite-close" aria-label="Close">×</button>' +
                  '<div class="cite-body">'+html+'</div>' +
                  '<div style="margin-top:8px;text-align:right;"><button class="cite-copy" type="button">Copy reference</button></div>';
    document.body.appendChild(pop);
    const r=el.getBoundingClientRect();
    const top=window.scrollY + r.bottom + 8;
    let left=window.scrollX + r.left;
    requestAnimationFrame(()=>{
      if(left+pop.offsetWidth > window.scrollX + window.innerWidth - 16){
        left = Math.max(16, window.scrollX + window.innerWidth - pop.offsetWidth - 16);
      }
      pop.style.top=top+'px'; pop.style.left=left+'px';
    });
    pop.querySelector('.cite-close').addEventListener('click', close);
    pop.querySelector('.cite-copy').addEventListener('click', function(){ copyPlain(plain); });
  }
  document.addEventListener('click', function(e){
    const a=e.target.closest('.cite-pop');
    if(a){
      e.preventDefault();
      open(a, a.getAttribute('data-ref'), a.getAttribute('data-plain'));
      return;
    }
    if(pop && !e.target.closest('.cite-popover')) close();
  });
  // Hover handling
  document.addEventListener('mouseover', function(e){
    const a=e.target.closest('.cite-pop');
    if(!a) return;
    clearTimeout(hoverTimer);
    hoverTimer=setTimeout(()=>{ open(a, a.getAttribute('data-ref'), a.getAttribute('data-plain')); }, 120);
  });
  document.addEventListener('mouseout', function(e){
    if(!pop) return;
    if(e.relatedTarget && (e.relatedTarget.closest('.cite-popover') || e.relatedTarget.closest('.cite-pop'))) return;
    clearTimeout(hoverTimer);
    hoverTimer=setTimeout(close, 200);
  });
  document.addEventListener('keydown', function(e){ if(e.key==='Escape') close(); });
  document.addEventListener('mouseover', function(e){
    if(pop && e.target.closest('.cite-popover')){ clearTimeout(hoverTimer); }
  });
  document.addEventListener('mouseout', function(e){
    if(pop && e.target.closest('.cite-popover')){
      clearTimeout(hoverTimer);
      hoverTimer=setTimeout(close, 200);
    }
  });
})();
</script>

<script>
// Mobile nav toggle
(function(){
  const header = document.querySelector('header');
  const btn = document.querySelector('.nav-toggle');
  if(!header || !btn) return;
  btn.addEventListener('click', function(){
    const open = header.classList.toggle('nav-open');
    btn.setAttribute('aria-expanded', open ? 'true' : 'false');
  });
  // Close menu on link click
  header.addEventListener('click', function(e){
    const a = e.target.closest('nav a');
    if(a && header.classList.contains('nav-open')){
      header.classList.remove('nav-open');
      btn.setAttribute('aria-expanded','false');
    }
  });
  // Close on outside click
  document.addEventListener('click', function(e){
    if(header.classList.contains('nav-open') && !e.target.closest('header')){
      header.classList.remove('nav-open');
      btn.setAttribute('aria-expanded','false');
    }
  });
  // Close on Esc
  document.addEventListener('keydown', function(e){
    if(e.key === 'Escape' && header.classList.contains('nav-open')){
      header.classList.remove('nav-open');
      btn.setAttribute('aria-expanded','false');
    }
  });
})();
</script>
</body></html>



